<!DOCTYPE html>
<html lang="lt">
<head>
<meta charset="UTF-8">
<title>Rašytojų pėdsakai</title>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Open Sans', sans-serif;
        background: #f5f5f5;
        margin: 0;
        padding: 0 2rem;
    }
    h1 {
        text-align: center;
        color: #1a1a1a;
        margin: 2rem 0;
    }
    .writers-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        padding-bottom: 2rem;
    }
    .writer-card {
        background: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        transition: transform 0.3s, box-shadow 0.3s;
        display: flex;
        flex-direction: column;
    }
    .writer-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    .writer-card img {
        width: 100%;
        height: 200px;
        object-fit: cover;
    }
    .writer-info {
        padding: 1rem;
    }
    .writer-info h3 {
        margin: 0 0 0.5rem 0;
        color: #1a1a1a;
    }
    .writer-info p {
        margin: 0.2rem 0;
        color: #555;
        font-size: 0.95rem;
    }
    a.map-link {
        display: block;
        text-align: center;
        margin-bottom: 1rem;
        text-decoration: none;
        font-weight: 600;
        color: #0077cc;
    }
</style>
</head>
<body>

<h1>Rašytojų pėdsakai</h1>
<a class="map-link" href="map.html">Peržiūrėti žemėlapyje</a>

<div class="writers-grid" id="content"></div>

<script>
async function loadData() {
    const [writersCSV, photosCSV] = await Promise.all([
        fetch('data/rasytojai.csv').then(r => r.text()),
        fetch('data/nuotraukos.csv').then(r => r.text())
    ]);

    const writers = writersCSV.trim().split('\n').slice(1).map(r => r.split(','));
    const photos = photosCSV.trim().split('\n').slice(1).map(r => r.split(','));

    const photoMap = {};
    photos.forEach(row => {
        const [id, rasytojas_id, failas, yra_pagrindine] = row;
        if(yra_pagrindine === 'True') photoMap[rasytojas_id] = failas;
    });

    const container = document.getElementById('content');
    writers.forEach(row => {
        const [id, vardas, gimimo_data, aprasymas] = row;
        const img = photoMap[id] ? `<img src="images/${photoMap[id]}" alt="${vardas}">` : '';
        container.innerHTML += `
        <div class="writer-card">
            ${img}
            <div class="writer-info">
                <h3>${vardas}</h3>
                <p><b>Gimimo data:</b> ${gimimo_data}</p>
                <p>${aprasymas}</p>
            </div>
        </div>
        `;
    });
}

loadData();
</script>

</body>
</html>
